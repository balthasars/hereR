<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Routing API • hereR</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Routing API">
<meta property="og:description" content="hereR">
<meta property="og:image" content="/logo.svg">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">hereR</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.5.2</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/authentication.html">Authentication</a>
    </li>
    <li>
      <a href="../articles/geocoder.html">Geocoder API</a>
    </li>
    <li>
      <a href="../articles/intermodal.html">Intermodal Routing API</a>
    </li>
    <li>
      <a href="../articles/routing.html">Routing API</a>
    </li>
    <li>
      <a href="../articles/traffic.html">Traffic API</a>
    </li>
    <li>
      <a href="../articles/transit.html">Public Transit API</a>
    </li>
    <li>
      <a href="../articles/weather.html">Destination Weather API</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/munterfinger/hereR">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="https://twitter.com/munterfi1">
    <span class="fa fa-twitter fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="https://munterfinger.ch">
    <span class="fa fa-globe fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="routing_files/accessible-code-block-0.0.1/empty-anchor.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Routing API</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/munterfinger/hereR/blob/master/vignettes/routing.Rmd"><code>vignettes/routing.Rmd</code></a></small>
      <div class="hidden name"><code>routing.Rmd</code></div>

    </div>

    
    
<p>Routing directions between locations, travel distance or time origin-destination matrices and isolines for points of interest (POIs) based on the ‘HERE Routing’ API.</p>
<div id="routing-directions" class="section level2">
<h2 class="hasAnchor">
<a href="#routing-directions" class="anchor"></a>Routing directions</h2>
<p>In order to calculate route geometries (<code>LINESTRING</code>) between pairs of points using the ‘HERE Routing API’ the function <code><a href="../reference/route.html">route()</a></code> is used. The function takes origin and destination locations as <code>sf</code> objects containing geometries of type <code>POINT</code> as input. Routes can be created for various transport modes, as for example car or public transport. Optionally the current or predicted traffic information is considered. For routes using the transport mode <code>"car"</code> a vehicle type can be specified, to obtain an estimate of the energy consumption on the routes.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">origin</span> <span class="op">&lt;-</span> <span class="va">poi</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">2</span>, <span class="op">]</span>
<span class="va">destination</span> <span class="op">&lt;-</span> <span class="va">poi</span><span class="op">[</span><span class="fl">3</span><span class="op">:</span><span class="fl">4</span>, <span class="op">]</span>
<span class="va">routes</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/route.html">route</a></span><span class="op">(</span>
  origin <span class="op">=</span> <span class="va">origin</span>,
  destination <span class="op">=</span> <span class="va">destination</span>
<span class="op">)</span></code></pre></div>
<table class="table">
<thead><tr>
<th style="text-align:right;">
id
</th>
<th style="text-align:left;">
departure
</th>
<th style="text-align:left;">
origin
</th>
<th style="text-align:left;">
arrival
</th>
<th style="text-align:left;">
destination
</th>
<th style="text-align:left;">
mode
</th>
<th style="text-align:left;">
traffic
</th>
<th style="text-align:right;">
distance
</th>
<th style="text-align:right;">
trafficTime
</th>
<th style="text-align:right;">
baseTime
</th>
<th style="text-align:right;">
travelTime
</th>
<th style="text-align:right;">
co2Emission
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
2020-11-26 18:15:41
</td>
<td style="text-align:left;">
Unterwilrain
</td>
<td style="text-align:left;">
2020-11-26 20:22:22
</td>
<td style="text-align:left;">
Avenue du Temple
</td>
<td style="text-align:left;">
car
</td>
<td style="text-align:left;">
disabled
</td>
<td style="text-align:right;">
211457
</td>
<td style="text-align:right;">
7655
</td>
<td style="text-align:right;">
7601
</td>
<td style="text-align:right;">
7601
</td>
<td style="text-align:right;">
30.704
</td>
</tr>
<tr>
<td style="text-align:right;">
2
</td>
<td style="text-align:left;">
2020-11-26 18:15:41
</td>
<td style="text-align:left;">
Via Riviera
</td>
<td style="text-align:left;">
2020-11-26 21:05:34
</td>
<td style="text-align:left;">
Giessliweg
</td>
<td style="text-align:left;">
car
</td>
<td style="text-align:left;">
disabled
</td>
<td style="text-align:right;">
265272
</td>
<td style="text-align:right;">
10630
</td>
<td style="text-align:right;">
10193
</td>
<td style="text-align:right;">
10193
</td>
<td style="text-align:right;">
38.517
</td>
</tr>
</tbody>
</table>
<p>Construct a route label and print the routes on an interactive leaflet map:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">routes</span><span class="op">$</span><span class="va">label</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste</a></span><span class="op">(</span><span class="va">origin</span><span class="op">$</span><span class="va">city</span><span class="op">[</span><span class="va">routes</span><span class="op">$</span><span class="va">id</span><span class="op">]</span>,
                      <span class="va">destination</span><span class="op">$</span><span class="va">city</span><span class="op">[</span><span class="va">routes</span><span class="op">$</span><span class="va">id</span><span class="op">]</span>,
                      sep <span class="op">=</span>  <span class="st">" - "</span><span class="op">)</span>
<span class="fu">mapview</span><span class="op">(</span><span class="va">routes</span>,
        zcol <span class="op">=</span> <span class="st">"label"</span>,
        lwd <span class="op">=</span> <span class="va">routes</span><span class="op">$</span><span class="va">travelTime</span><span class="op">/</span><span class="fu"><a href="https://rdrr.io/r/base/Extremes.html">max</a></span><span class="op">(</span><span class="va">routes</span><span class="op">$</span><span class="va">travelTime</span><span class="op">)</span><span class="op">*</span><span class="fl">5</span>,
        layer.name <span class="op">=</span> <span class="st">"Route [O-D]"</span>,
        map.types <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Esri.WorldTopoMap"</span><span class="op">)</span>,
        homebutton <span class="op">=</span> <span class="cn">FALSE</span>
<span class="op">)</span></code></pre></div>
</div>
<div id="routing-matrix" class="section level2">
<h2 class="hasAnchor">
<a href="#routing-matrix" class="anchor"></a>Routing matrix</h2>
<p>The function <code><a href="../reference/route_matrix.html">route_matrix()</a></code> calculates a matrix of route summaries between given POIs. The function takes origin and destination locations as <code>sf</code> objects containing geometries of type <code>POINT</code> as input. If only one <code>sf</code> object is provided as <code>origin</code> an origin-destination matrix, which covers all route combinations, is constructed. Various transport modes and current or predicted traffic information are supported. The requested matrix is split into (sub-)matrices of dimension 15x100 in order to use the maximum allowed matrix size per request. Thereby the number of overall needed requests is minimized. The return value of the function <code>route_matrix</code> is one route summary matrix, that fits the order of the provided POIs: <code>origIndex</code>, <code>destIndex</code>.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># From - to</span>
<span class="va">mat</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/route_matrix.html">route_matrix</a></span><span class="op">(</span>
  origin <span class="op">=</span> <span class="va">poi</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">2</span>, <span class="op">]</span>,
  destination <span class="op">=</span> <span class="va">poi</span><span class="op">[</span><span class="fl">3</span><span class="op">:</span><span class="fl">4</span>, <span class="op">]</span>
<span class="op">)</span>

<span class="co"># Construct O-D matrix (all routes between the POIs)</span>
<span class="va">mat</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/route_matrix.html">route_matrix</a></span><span class="op">(</span>
  origin <span class="op">=</span> <span class="va">poi</span>
<span class="op">)</span></code></pre></div>
<p>Print the first 10 rows of the matrix table, created from the POIs above, where the distance is in meters, the travel time in seconds and the consumption in cost factor units:</p>
<table class="table">
<thead><tr>
<th style="text-align:right;">
origIndex
</th>
<th style="text-align:right;">
destIndex
</th>
<th style="text-align:left;">
departure
</th>
<th style="text-align:left;">
arrival
</th>
<th style="text-align:right;">
distance
</th>
<th style="text-align:right;">
travelTime
</th>
<th style="text-align:right;">
costFactor
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
2020-11-26 18:15:41
</td>
<td style="text-align:left;">
2020-11-26 18:15:41
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
</tr>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:left;">
2020-11-26 18:15:41
</td>
<td style="text-align:left;">
2020-11-26 20:14:30
</td>
<td style="text-align:right;">
172685
</td>
<td style="text-align:right;">
7129
</td>
<td style="text-align:right;">
7194
</td>
</tr>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:left;">
2020-11-26 18:15:41
</td>
<td style="text-align:left;">
2020-11-26 20:22:24
</td>
<td style="text-align:right;">
211455
</td>
<td style="text-align:right;">
7603
</td>
<td style="text-align:right;">
7668
</td>
</tr>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:left;">
2020-11-26 18:15:41
</td>
<td style="text-align:left;">
2020-11-26 19:21:50
</td>
<td style="text-align:right;">
99141
</td>
<td style="text-align:right;">
3969
</td>
<td style="text-align:right;">
4065
</td>
</tr>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
5
</td>
<td style="text-align:left;">
2020-11-26 18:15:41
</td>
<td style="text-align:left;">
2020-11-26 19:35:41
</td>
<td style="text-align:right;">
117374
</td>
<td style="text-align:right;">
4800
</td>
<td style="text-align:right;">
4865
</td>
</tr>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
6
</td>
<td style="text-align:left;">
2020-11-26 18:15:41
</td>
<td style="text-align:left;">
2020-11-26 19:00:01
</td>
<td style="text-align:right;">
55301
</td>
<td style="text-align:right;">
2660
</td>
<td style="text-align:right;">
2705
</td>
</tr>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
7
</td>
<td style="text-align:left;">
2020-11-26 18:15:41
</td>
<td style="text-align:left;">
2020-11-26 20:53:20
</td>
<td style="text-align:right;">
265764
</td>
<td style="text-align:right;">
9459
</td>
<td style="text-align:right;">
9526
</td>
</tr>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
8
</td>
<td style="text-align:left;">
2020-11-26 18:15:41
</td>
<td style="text-align:left;">
2020-11-26 19:42:13
</td>
<td style="text-align:right;">
132417
</td>
<td style="text-align:right;">
5192
</td>
<td style="text-align:right;">
5315
</td>
</tr>
<tr>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
2020-11-26 18:15:41
</td>
<td style="text-align:left;">
2020-11-26 20:14:09
</td>
<td style="text-align:right;">
171589
</td>
<td style="text-align:right;">
7108
</td>
<td style="text-align:right;">
7173
</td>
</tr>
<tr>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:left;">
2020-11-26 18:15:41
</td>
<td style="text-align:left;">
2020-11-26 18:15:41
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
</tr>
</tbody>
</table>
</div>
<div id="isoline" class="section level2">
<h2 class="hasAnchor">
<a href="#isoline" class="anchor"></a>Isoline</h2>
<p>Isolines are constructed by the function <code><a href="../reference/isoline.html">isoline()</a></code>. The calculated polygons (<code>POLYGON</code> or <code>MULTIPOLYGON</code>) connect the end points of all routes leaving from defined centers (POIs) with either a specified length (isodistance), a specified travel time (isochrone) or consumption (isoconsumption), whereby time is measured in seconds, distance in meters and consumption as costfactor. By default the <code>aggregate</code> parameter is set to <code>TRUE</code>, which means that the isoline polygons are intersected and the minimum range value (time, distance or consumption) is taken in all intersecting areas, then the polyons are aggregated to polygons of geometry type <code>MULTIPOLYGON</code>. Thereby overlapping isolines are avoided.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">iso</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/isoline.html">isoline</a></span><span class="op">(</span>
  <span class="va">poi</span>,
  range <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html">seq</a></span><span class="op">(</span><span class="fl">5</span>, <span class="fl">30</span>, <span class="fl">5</span><span class="op">)</span> <span class="op">*</span> <span class="fl">60</span>,
  range_type <span class="op">=</span> <span class="st">"time"</span>,
  type <span class="op">=</span> <span class="st">"fastest"</span>,
  mode <span class="op">=</span> <span class="st">"car"</span>,
  aggregate <span class="op">=</span> <span class="cn">TRUE</span>,
  traffic <span class="op">=</span> <span class="cn">FALSE</span>
<span class="op">)</span></code></pre></div>
<p>Convert range from seconds to minutes and print the aggregated isolines on an interactive leaflet map:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">iso</span><span class="op">$</span><span class="va">minutes</span> <span class="op">&lt;-</span> <span class="va">iso</span><span class="op">$</span><span class="va">range</span><span class="op">/</span><span class="fl">60</span>
<span class="fu">mapview</span><span class="op">(</span><span class="va">iso</span>,
        zcol <span class="op">=</span> <span class="st">"minutes"</span>,
        layer.name <span class="op">=</span> <span class="st">"Isoline [min]"</span>,
        alpha <span class="op">=</span> <span class="fl">0</span>,
        map.types <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Esri.WorldTopoMap"</span><span class="op">)</span>,
        homebutton <span class="op">=</span> <span class="cn">FALSE</span>
<span class="op">)</span></code></pre></div>
</div>
<div id="api-reference" class="section level2">
<h2 class="hasAnchor">
<a href="#api-reference" class="anchor"></a>API Reference</h2>
<ul>
<li><a href="https://developer.here.com/documentation/routing/topics/resource-calculate-route.html">Route direction</a></li>
<li><a href="https://developer.here.com/documentation/routing/topics/resource-calculate-matrix.html">Route matrix</a></li>
<li><a href="https://developer.here.com/documentation/routing/topics/resource-calculate-isoline.html">Isoline</a></li>
</ul>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by <a href="https://www.munterfinger.ch">Merlin Unterfinger</a>.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.9000.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
