<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Public Transit API • hereR</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Public Transit API">
<meta property="og:description" content="hereR">
<meta property="og:image" content="/logo.svg">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">hereR</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.4.1.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/authentication.html">Authentication</a>
    </li>
    <li>
      <a href="../articles/geocoder.html">Geocoder API</a>
    </li>
    <li>
      <a href="../articles/intermodal.html">Intermodal Routing API</a>
    </li>
    <li>
      <a href="../articles/routing.html">Routing API</a>
    </li>
    <li>
      <a href="../articles/traffic.html">Traffic API</a>
    </li>
    <li>
      <a href="../articles/transit.html">Public Transit API</a>
    </li>
    <li>
      <a href="../articles/weather.html">Destination Weather API</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/munterfinger/hereR">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="https://twitter.com/munterfi1">
    <span class="fa fa-twitter fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="https://munterfinger.ch">
    <span class="fa fa-globe fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="transit_files/accessible-code-block-0.0.1/empty-anchor.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Public Transit API</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/munterfinger/hereR/blob/master/vignettes/transit.Rmd"><code>vignettes/transit.Rmd</code></a></small>
      <div class="hidden name"><code>transit.Rmd</code></div>

    </div>

    
    
<p>Request public transport connections between given points and find stations nearby using the ‘HERE Public Transit’ API.</p>
<div id="connections" class="section level2">
<h2 class="hasAnchor">
<a href="#connections" class="anchor"></a>Connections</h2>
<p>The function <code><a href="../reference/connection.html">connection()</a></code> allows to request public transport connections from the API. Two types of requests are provided:</p>
<ul>
<li>
<code><a href="../reference/connection.html">connection(..., summary = FALSE)</a></code>: The public transport connections are returned as multiple sections with the same vehicle and transport mode. Each row represents a section with a detailed route geometry.</li>
<li>
<code><a href="../reference/connection.html">connection(..., summary = TRUE)</a></code>: A summary of the connections is retrieved, where each connection is represented as one row with a unified and simplified geometry.</li>
</ul>
<div id="sections" class="section level3">
<h3 class="hasAnchor">
<a href="#sections" class="anchor"></a>1. Sections</h3>
<p>Request available public transport connections as detailed sections:</p>
<div class="sourceCode" id="cb1"><pre class="downlit">
<span class="kw">connection_section</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/connection.html">connection</a></span>(
  origin = <span class="kw">poi</span>[<span class="fl">3</span><span class="op">:</span><span class="fl">4</span>, ],
  destination = <span class="kw">poi</span>[<span class="fl">5</span><span class="op">:</span><span class="fl">6</span>, ],
  summary = <span class="fl">FALSE</span>
)
</pre></div>
<p>The <code>id</code> column corresponds to the row of the input locations (<code>origin</code> and <code>destination</code>) and the <code>rank</code> column enumerates the alternative routes. The maximum number of alternatives can be set by the <code>results</code> parameter. Each row in the returned <code>sf</code> object corresponds to a route section with a transport mode in a vehicle without a transfer.</p>
<table class="table">
<thead><tr>
<th style="text-align:right;">
id
</th>
<th style="text-align:right;">
rank
</th>
<th style="text-align:left;">
departure
</th>
<th style="text-align:left;">
origin
</th>
<th style="text-align:left;">
arrival
</th>
<th style="text-align:left;">
destination
</th>
<th style="text-align:left;">
mode
</th>
<th style="text-align:left;">
vehicle
</th>
<th style="text-align:left;">
direction
</th>
<th style="text-align:right;">
distance
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
2020-08-29 17:18:00
</td>
<td style="text-align:left;">
ORIG
</td>
<td style="text-align:left;">
2020-08-29 17:28:00
</td>
<td style="text-align:left;">
Lausanne, Sallaz
</td>
<td style="text-align:left;">
Walk
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:right;">
582
</td>
</tr>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
2020-08-29 17:28:00
</td>
<td style="text-align:left;">
Lausanne, Sallaz
</td>
<td style="text-align:left;">
2020-08-29 17:38:00
</td>
<td style="text-align:left;">
Lausanne, gare
</td>
<td style="text-align:left;">
Train
</td>
<td style="text-align:left;">
m2
</td>
<td style="text-align:left;">
Lausanne, Ouchy-Olympique
</td>
<td style="text-align:right;">
2940
</td>
</tr>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
2020-08-29 17:38:00
</td>
<td style="text-align:left;">
Lausanne, gare
</td>
<td style="text-align:left;">
2020-08-29 17:43:00
</td>
<td style="text-align:left;">
Lausanne
</td>
<td style="text-align:left;">
Walk
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:right;">
300
</td>
</tr>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
2020-08-29 17:44:00
</td>
<td style="text-align:left;">
Lausanne
</td>
<td style="text-align:left;">
2020-08-29 18:56:00
</td>
<td style="text-align:left;">
Bern
</td>
<td style="text-align:left;">
Intercity Train
</td>
<td style="text-align:left;">
IR 15
</td>
<td style="text-align:left;">
Luzern
</td>
<td style="text-align:right;">
97091
</td>
</tr>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
2020-08-29 19:02:00
</td>
<td style="text-align:left;">
Bern
</td>
<td style="text-align:left;">
2020-08-29 19:13:00
</td>
<td style="text-align:left;">
Kehrsatz Nord
</td>
<td style="text-align:left;">
Train
</td>
<td style="text-align:left;">
S 3
</td>
<td style="text-align:left;">
Belp
</td>
<td style="text-align:right;">
8668
</td>
</tr>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
2020-08-29 19:13:00
</td>
<td style="text-align:left;">
Kehrsatz Nord
</td>
<td style="text-align:left;">
2020-08-29 19:14:00
</td>
<td style="text-align:left;">
DEST
</td>
<td style="text-align:left;">
Walk
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:right;">
76
</td>
</tr>
</tbody>
</table>
<p>Print the public transport sections on an interactive leaflet map:</p>
<div class="sourceCode" id="cb2"><pre class="downlit">
<span class="fu">mapview</span>(<span class="kw">connection_section</span>,
        zcol = <span class="st">"mode"</span>,
        layer.name = <span class="st">"Transport mode"</span>,
        map.types = <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"Esri.WorldTopoMap"</span>),
        homebutton = <span class="fl">FALSE</span>
)
</pre></div>
<p><strong>Note:</strong> The geometries of walking sections are straight lines between the origin, station or destination points instead of routed paths on the pedestrian network. The reason for this is that it is not possible to match the <em>“maneuvers”</em> to the <em>“connections-sections”</em> in the API response using the section id (<code>sec_id</code>). The walking segments can be routed in hindsight using the <code><a href="../reference/route.html">route()</a></code> function with transport mode set to <code>"pedestrian"</code>.</p>
</div>
<div id="summary" class="section level3">
<h3 class="hasAnchor">
<a href="#summary" class="anchor"></a>2. Summary</h3>
<p>Request a summary of the available public transport connections:</p>
<div class="sourceCode" id="cb3"><pre class="downlit">
<span class="kw">connection_summary</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/connection.html">connection</a></span>(
  origin = <span class="kw">poi</span>[<span class="fl">3</span><span class="op">:</span><span class="fl">4</span>, ],
  destination = <span class="kw">poi</span>[<span class="fl">5</span><span class="op">:</span><span class="fl">6</span>, ],
  summary = <span class="fl">TRUE</span>
)
</pre></div>
<table class="table">
<thead><tr>
<th style="text-align:right;">
id
</th>
<th style="text-align:right;">
rank
</th>
<th style="text-align:left;">
departure
</th>
<th style="text-align:left;">
origin
</th>
<th style="text-align:left;">
arrival
</th>
<th style="text-align:left;">
destination
</th>
<th style="text-align:right;">
transfers
</th>
<th style="text-align:left;">
modes
</th>
<th style="text-align:left;">
vehicles
</th>
<th style="text-align:right;">
distance
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
2020-08-29 17:18:00
</td>
<td style="text-align:left;">
Lausanne, Sallaz
</td>
<td style="text-align:left;">
2020-08-29 19:14:00
</td>
<td style="text-align:left;">
Kehrsatz Nord
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:left;">
Train, Intercity Train, Train
</td>
<td style="text-align:left;">
m2, IR 15, S 3
</td>
<td style="text-align:right;">
109657
</td>
</tr>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:left;">
2020-08-29 17:55:00
</td>
<td style="text-align:left;">
Lausanne, Sallaz
</td>
<td style="text-align:left;">
2020-08-29 19:44:00
</td>
<td style="text-align:left;">
Kehrsatz Nord
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:left;">
Train, Intercity Train, Train
</td>
<td style="text-align:left;">
m2, IC 1, S 3
</td>
<td style="text-align:right;">
109657
</td>
</tr>
<tr>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
2020-08-29 16:58:00
</td>
<td style="text-align:left;">
Basel, Kleinhüningen
</td>
<td style="text-align:left;">
2020-08-29 18:41:00
</td>
<td style="text-align:left;">
Zürich HB
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:left;">
Bus, Train, Intercity Train
</td>
<td style="text-align:left;">
36, S 6, TGV 21
</td>
<td style="text-align:right;">
97061
</td>
</tr>
<tr>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:left;">
2020-08-29 17:02:00
</td>
<td style="text-align:left;">
Basel, Kleinhüningen
</td>
<td style="text-align:left;">
2020-08-29 19:05:00
</td>
<td style="text-align:left;">
Zürich HB
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
Tram, Intercity Train
</td>
<td style="text-align:left;">
8, IR 36
</td>
<td style="text-align:right;">
94784
</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="stations" class="section level2">
<h2 class="hasAnchor">
<a href="#stations" class="anchor"></a>Stations</h2>
<p>The function <code><a href="../reference/station.html">station()</a></code> allows to request public transport stations nearby points of interest (POIs). The <code>radius</code> defines the maximum search distance in meters and <code>results</code> specifies the maximum number of returned stations. The returned <code>sf</code> object contains the locations of the stations and the available public transport lines at the station.</p>
<div class="sourceCode" id="cb4"><pre class="downlit">
<span class="kw">stations</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/station.html">station</a></span>(
  poi = <span class="kw">poi</span>,
  radius = <span class="fl">500</span>,
  results = <span class="fl">5</span>
)
</pre></div>
<p>Print the POIs, the radius and stations on an interactive leaflet map:</p>
<div class="sourceCode" id="cb5"><pre class="downlit">
<span class="kw">buffer</span> <span class="op">&lt;-</span>
  <span class="kw">poi</span> <span class="op">%&gt;%</span>
  <span class="fu">st_transform</span>(<span class="fl">2056</span>) <span class="op">%&gt;%</span>
  <span class="fu">st_buffer</span>(<span class="fl">500</span>) <span class="op">%&gt;%</span>
  <span class="fu">st_transform</span>(<span class="fl">4326</span>)

<span class="kw">m</span> <span class="op">&lt;-</span>
  <span class="fu">mapview</span>(<span class="kw">poi</span>, alpha.region = <span class="fl">1</span>, col.region = <span class="st">"black"</span>,
          label = <span class="kw">poi</span><span class="op">$</span><span class="kw">city</span>, layer.name = <span class="st">"POIs"</span>,
          map.types = <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"Esri.WorldTopoMap"</span>), homebutton = <span class="fl">FALSE</span>) <span class="op">+</span>
  <span class="fu">mapview</span>(<span class="kw">stations</span>, col.region = <span class="st">"yellow"</span>, alpha = <span class="fl">1</span>,
          label = <span class="kw">stations</span><span class="op">$</span><span class="kw">station</span>, layer.name = <span class="st">"Stations"</span>,
          homebutton = <span class="fl">FALSE</span>) <span class="op">+</span>
  <span class="fu">mapview</span>(<span class="kw">buffer</span>, col.region = <span class="st">"transparent"</span>, alpha.region = <span class="fl">0</span>,
          layer.name = <span class="st">"Buffer"</span>, homebutton = <span class="fl">FALSE</span>, legend = <span class="fl">FALSE</span>)
<span class="kw">m</span>
</pre></div>
</div>
<div id="api-reference" class="section level2">
<h2 class="hasAnchor">
<a href="#api-reference" class="anchor"></a>API Reference</h2>
<ul>
<li><a href="https://developer.here.com/documentation/transit/dev_guide/topics/quick-start-routing-1.html">Transit Route</a></li>
<li><a href="https://developer.here.com/documentation/examples/rest/public_transit/station-search-proximity">Find Stations Nearby</a></li>
</ul>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by <a href="https://www.munterfinger.ch">Merlin Unterfinger</a>.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.5.1.9000.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
